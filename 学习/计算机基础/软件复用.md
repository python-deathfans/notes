> **低生产率**、低质量高费用是现今软件开发急需解决的重要问题。**软件重用**是缓和这些
> 问题的最有效方法之一。自 **1968** 年 D .Mcilroy 在NATO 软件工程会议上**首次提出软件重用**的
> 问题以来, 人们对软件重用技术和方法进行了深入的研究。结果表明, 软件重用方法不仅是提
> 高软件生产率, 提高软件系统的可靠性 、缩短软件系统的开发周期和减轻软件维护负担的一种
> 有效手段, 而且能够使问题域的知识得到积累和共享 、使软件系统能适应不断变化的需求 、增
> 强软件适应能力和生存能力, 防止软件老化以及有利于软件的标准化 、产品化和自动化的生
> 产, 给软件生产带来潜在的巨大经济效益都会起到非常重要的作用   

> 软件复用（sofware reuse)是一种由预先构造好的、为复用目的而设计的软件构件建立或者组装软件系统的过程。
>
> 软件复用是指为了避免软件开发过程中的重复劳动，而将已有的软件及其有效成分用于建立新的软件，以缩短软件开发周期，缩减软件开发和维护的花费，提高软件质量的一种重要软件工程技术  

## 引言

> **1968年北大西洋公约组织**的计算机科学家在联邦德国召开的国际学术会议上第一次提出了“**软件危机**”（Software Crisis）这个名词。
> **软件危机**指的是在**计算机软件的开发和维护过程中所遇到的一系列严重问题**。
>
> 软件危机包含两方面问题：
>
> **如何开发软件**，以满足不断增长，日趋复杂的需求；
>
> **如何维护**数量不断膨胀的软件产品。
>
> **面向对象技术**是一种新的软件技术，其概念来源于程序设计，从**20世纪60年代**提出**面向对象的概念**，到现在已发展成为一种比较成熟的编程思想，并且逐步成为目前软件开发领域的主流技术。有一种普遍的认识：它是一种创建可互换可复用部件的可行技术。支持软件复用是人们对面向对象方法寄托的主要希望之一，也是这种方法受到广泛重视的主要原因之一。`面向对象方法之所以特别有利于软件复用，是由于它的主要概念及原则与软件复用的要求十分吻合`。

##  面向对象技术

> 面向对象的软件复用方法以其独特的特点一将复用构件的构造技术、复用技术、修改技术和合成技术有机地揉合在一起，日益引起人们的注意。面向对象方法中的**对象（类）是复用构件的一种雏形**；**类和类继承是强有力的复用机制**；**继承和重载是复用构件的修改技术**；**继承和消息传递是复用构件合成新构件的构件合成机制**。

+ 基本观点

  + **客观世界是由对象组成的**，复杂的对象可以由简单的对象组成。
  + 具有**相同的数据和相同的操作**的对象可以归并为一个类，对象是类的一个实例。
  + 类可以派生出子类，**子类继承父类的特性，又可以有自己的新特性**。子类与父类形成类的层次结构。
  + **对象之间通过消息传递**相互联系。
  
+ 面向对象=对象+类+继承+通信

+ `对象`

+ `消息或者方法`

    + **消息是指对象之间在交互中所传送的通信信息**，是从发送者到接受者的一条执行服务的请求，接受消息的对象响应该消息，激发所要求的服务操作，并把操作的结果返回给请求服务的对象。

+ **类**

  + 实质上是定义了一种对象类型，描述了属于该类型的所有对象的性质
  + 任何一个对象都是某个类的实例，每一个类都是具有某些共同特征的对象组成

+ **技术特性**

  + **数据抽象**
    + `抽象`指**仅表现核心的特性而不描述背景细节的行为**。
    + 类使用了抽象的概念，并且被定义为一系列抽象的属性如尺寸、重量和价格，以及操作这些属性的函数。
    + 类封装了将要被创建的对象的所有核心属性。ADT
  + **封装**
    + 将对象的属性和方法封装到具有适当定义接口的容器中。
    + 对象提供的方法和属性应使对象能够如期使用
    + 目的在于将对象的使用者和设计者分开，使用者不必知道行为实现的细节，只需要设计者提供的消息来访问该对象即可。
  + **继承**
    + 继承性（Inheritance)是**自动地共享类、子类和对象中的方法和数据的机制**。
    + 每个对象都是某个类的实例，一个系统种类对象是各自封闭的。
    + 在OOP中，继承的概念很好的支持了代码的**重用性**（reusability)，也就是说，我们可以向一个已经**存在的类中添加新的特性，而不必改变这个类**。这可以**通过从这个已存在的类派生一个新类来实现**。
    + 继承性是实现从可重用成分构造软件系统的最有效的特性，它不仅支持系统的可重用性，而且还促进系统的可扩充性。
  + **多态**
    + 事物具有不同形式的能力
    + 对于不同的实例，某个操作可能会有不同的行为，它的行为依赖索要操作的数据的类型
    + 函数重载、运算符重载

+ **对象（类）-可复用构建的雏形**

  + 对象是数据和功能的统一体，集内部状态属性和外部行为属性于一体，具有极高的独立性
  + 对象之间是一种**松耦合关系**，通过接口发送或接收信息来建立对象之间的请和被请求关系

+ **类与类继承-复用机制**

    + 类是对具有相似性质的对象的描述，从而使得这些对象可以共享这些描述，类继承提供了复用不同类的描述的可能性，进一步扩大了共享的范围和灵活性。

+ **继承和重载是复用构件的修改技术**

    + 在面向对象方法中，要设计一个新的对象（类），如果已有一个相似的对象（类）存在，则不必从头开始来设计这个对象（类），**作为已有类的子类，继承父类的所有特征，只需描述与已有对象（类）不同的部分**。继承和重载使对象（类）的修改可以不通过直接对它进行增删和修改的方法来进行。

+ **继承和消息传递是复用构件合成新构件的构件合成机制**

+ **方法要点**

  + 认为现实世界是由**各种对象组成**，任何事物都是对象，复杂的对象可以有比较简单的对象以某种方式组合而成。
  + 把所有对象都划分成各种对象类（简称为类），每个对象类都定义了一组数据和一组方法。
  + 按照子类（也称导出类）与父类的关系，把若干个对象类组成一个层次结构的系统。
  + 对象之间仅能通过**传递消息**相联系。

+ **主要优点**

  + 与人类习惯的思维方法一致；
  + 稳定性好；
  + 可重用性好；
  + 可维护性好；
  + 面向对象的软件稳定性好；
  + 面向对象的软件容易修改；
  + 面向对象的软件容易理解；
  + 易于测试和调试。

+ **继承和重载-修改机制**

  + > 在面向对象方法中，要设计一个新的对象（类），如果已有一个相似的对象（类）存在，则不必从头开始来设计这个对象（类），作为已有类的子类，继承父类的所有特征，只需描述与己有对象（类）不同的部分。继承和重载使对象（类）的修改可以不通过直接对它进行增删和修改的方法来进行。

+ **继承及消息传递-构件合成技术**

  + > 若类“subclass”是类“class”的子类，则类“subclass”是类“class”与它自身定义的“合成”。若在类A的定义中有诸如b：B的声明（b是B的一个实例），则类A的定义就可以通过b来利用类B的功能，这就是消息传递合成技术。这两种合成方法相互配合使用，相辅相成，是有效的构件合成技术。

## 复用技术

> **最理想的复用技术**是它的**复用产品能够和用户的需求完全一致**，不需要用户做任何自定义，并且能够**无需用户学习就能够被使用**。然而，一种复用技术能够适合今天，可能不适合明天。一个复用产品越是能够被自定义，它越是可能在一个特定的环境下被使用，但是这也需要用户进行更多的学习，研究和实践。
>
> **软件复用**指重复使用“为了复用目的而设计的软件”的过程。其出发点是在软件开发中**避免重复劳动**，使软件开发不再一切从零开始，而是以已有的工作为基础，充分利用过去软件开发中积累的知识和经验。

### 基本问题

+ 必须有可以复用的对象
+ 所复用的对象必须是有用的
+ 复用者需要知道如何去使用被复用的对象

### 流行的复用技术

+ `库函数`
  + 库函数是很早的软件复用技术。
  + 很多编程语言为了增强自身的功能，都提供了大量的库函数。**对于库函数的使用者，他只要知道函数的名称，返回值的类型，函数参数和函数功能就可以对其进行调用。**
+ `面向对象`
  + 面向对象技术是近三十年来学术界和工业界研究和应用的一个热点。面问对象技术通过方法、消息、类、继承、封装、和实例等机制构造软件系统，并为软件重用提供强有力的支持。**面向对象方法已成为当今最有效、最先进的软件开发方法**。

### 继承

+ 如果需要复用一个类，可以直接**把这个类当成基类来继承**
+ 优缺点
  + 如果**访问权限允许**，子类可以直接访问父类的成员变量和方法，相当于子类可以直接复用父类的成员变量和方法
  + 继承带来高度复用的同时，也**严重地破坏了父类的封装性**
+ 如果**只是出于类复用**的目的，并不一定需要使用继承，**完全可以使用组合**来实现

## 基本概念

+ MVC
  + module 类的模型
  + viewer  视图
  + controller 控制器
+ 面向对象**程序**由**对象**组成，对象包括**数据和对数据进行操作**的过程，过程通常称为**方法或操作**。对象在收到客户的请求（或消息）后，执行相应的操作。
+ **客户请求**是使对象执行操作的唯一方法，**操作**又是对象改变内部数据的唯一方法。由于这些限制，**对象的内部状态是被封装的**，它不能被直接访问，**它的表示对于对象外部是不可见**的。
+ 对象声明的每一个操作指定操作名、作为参数的对象和返回值，这就是所谓的操作的**型构**（signature)。对象操作所定义的所有操作**型构的集合**被称为该对象的**接口**（interface)。对象接口描述了该对象所能接受的全部请求的集合，任何匹配对象接口中型构的请求都可以发送给该对象。
+ 在**面向对象**系统中，**接口**是基本的组成部分。对象只有通过它们的接口才能与外部交流，如果不通过对象的接口就无法知道对象的任何事情，也无法请求对象做任何事情。对象接口与其功能实现是分离的，不同对象可以对请求做不同的实现，也就是说，两个有相同接口的对象可以有完全不同的实现。
+ **复用机制**
  + 面向对象系统中功**能复用**的两种最常用技术是**类继承**和**对象组合**（object composition)。正如我们已解释过的，类继承允许你根据其他类的实现来定义一个类的实现。这种通过**生成子类的复用**通常被称为**白箱复用**（white-box reuse)。术语“白箱”是相对可视性而言：在继承方式中，父类的内部细节对子类可见。
  + **对象组合**是类继承之外的另一种复用选择。新的更复杂的功能可以通过组装或组合对象来获得。对象组合要求被组合的对象具有良好定义的接口。这种复用风格被称为**黑箱复用**(black-box reuse)，因为**对象的内部细节是不可见**的。对象只以“黑箱”的形式出现。
+ 继承组合优缺点
  + **继承**在**编译**时刻就定义了，所以**无法在运行时刻改变从父类继承的实现**。更糟的是，父类通常至少定义了部分子类的具体表示。因为继承对子类揭示了其父类的实现细节，所以继承常被认为“破坏了封装性”[Sny86]。子类中的实现与它的父类有如此紧密的依赖关系，以至于父类实现中的任何变化必然会导致子类发生变化。
  + **对象组合**是通过获得对**其他对象的引用**而在运行时刻动态定义的。组合要求对象遵守彼此的接口约定，进而要求更仔细地定义接口，而这些接口并不妨碍你将一个对象和其他对象一起使用。这还会产生良好的结果：因为对象只能通过接口访问，所以我们**并不破坏封装性**；只要类型一致，运行时刻还可以用一个对象来替代另一个对象；更进一步，因为对象的实现是基于接口写的，所以实现上存在较少的依赖关系。

